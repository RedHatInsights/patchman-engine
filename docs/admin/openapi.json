{
    "openapi": "3.0.1",
    "info": {
        "title": "Patch Admin API",
        "description": "Admin API of the Patch application on [internal.console.redhat.com](https://internal.console.redhat.com)",
        "contact": {},
        "license": {
            "name": "GPLv3",
            "url": "https://www.gnu.org/licenses/gpl-3.0.en.html"
        },
        "version": "v3.3.16"
    },
    "servers": [
        {
            "url": "/api/patch/admin"
        }
    ],
    "paths": {
        "/check-caches": {
            "get": {
                "summary": "Check cached counts",
                "description": "Check cached counts",
                "operationId": "checkCaches",
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Conflict",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "RhIdentity": []
                    }
                ]
            }
        },
        "/pprof/evaluator_recalc/{param}": {
            "get": {
                "summary": "Get profile info",
                "description": "Get profile info",
                "operationId": "getEvaluatorRecalcPprof",
                "parameters": [
                    {
                        "name": "param",
                        "in": "path",
                        "description": "What to profile",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {}
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/octet-stream": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "RhIdentity": []
                    }
                ]
            }
        },
        "/pprof/evaluator_upload/{param}": {
            "get": {
                "summary": "Get profile info",
                "description": "Get profile info",
                "operationId": "getEvaluatorUploadPprof",
                "parameters": [
                    {
                        "name": "param",
                        "in": "path",
                        "description": "What to profile",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {}
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/octet-stream": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "RhIdentity": []
                    }
                ]
            }
        },
        "/pprof/listener/{param}": {
            "get": {
                "summary": "Get profile info",
                "description": "Get profile info",
                "operationId": "getListenerPprof",
                "parameters": [
                    {
                        "name": "param",
                        "in": "path",
                        "description": "What to profile",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {}
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/octet-stream": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "RhIdentity": []
                    }
                ]
            }
        },
        "/pprof/manager/{param}": {
            "get": {
                "summary": "Get profile info",
                "description": "Get profile info",
                "operationId": "getManagerPprof",
                "parameters": [
                    {
                        "name": "param",
                        "in": "path",
                        "description": "What to profile",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {}
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/octet-stream": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "RhIdentity": []
                    }
                ]
            }
        },
        "/re-calc": {
            "get": {
                "summary": "Re-evaluate systems",
                "description": "Re-evaluate systems",
                "operationId": "recalc",
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "RhIdentity": []
                    }
                ]
            }
        },
        "/refresh-packages": {
            "put": {
                "summary": "Refresh package caches",
                "description": "Refresh package caches for all accounts with invalidated cache",
                "operationId": "refreshPackagesCaches",
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Conflict",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "RhIdentity": []
                    }
                ]
            }
        },
        "/refresh-packages/{account}": {
            "put": {
                "summary": "Refresh package caches per account",
                "description": "Refresh package caches for specified account by internal account id",
                "operationId": "refreshPackagesAccountCaches",
                "parameters": [
                    {
                        "name": "account",
                        "in": "path",
                        "description": "Internal account ID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Conflict",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "RhIdentity": []
                    }
                ]
            }
        },
        "/sessions/{pid}": {
            "delete": {
                "summary": "Terminate db session",
                "description": "Terminate db session",
                "operationId": "TerminateSession",
                "parameters": [
                    {
                        "name": "pid",
                        "in": "path",
                        "description": "pid",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Conflict",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "RhIdentity": []
                    }
                ]
            }
        },
        "/sessions/{search}": {
            "get": {
                "summary": "Get active db sessions",
                "description": "Get active db sessions",
                "operationId": "getSessions",
                "parameters": [
                    {
                        "name": "search",
                        "in": "path",
                        "description": "Search string",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/controllers.Session"
                                    }
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Conflict",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "RhIdentity": []
                    }
                ]
            }
        },
        "/sync": {
            "get": {
                "summary": "Sync data from VMaaS",
                "description": "Sync data from VMaaS",
                "operationId": "sync",
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "RhIdentity": []
                    }
                ]
            }
        }
    },
    "components": {
        "schemas": {
            "controllers.Session": {
                "type": "object",
                "properties": {
                    "pid": {
                        "type": "integer"
                    },
                    "query": {
                        "type": "string"
                    }
                }
            }
        },
        "securitySchemes": {
            "RhIdentity": {
                "type": "apiKey",
                "name": "x-rh-identity",
                "in": "header"
            }
        }
    }
}
